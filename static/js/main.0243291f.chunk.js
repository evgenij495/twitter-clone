(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{53:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c(3),s=c.n(n),r=c(41),i=c.n(r),l=c(19),j=c(6),o=(c(53),c(26));c(54),c(56),c(65);o.a.apps.length||o.a.initializeApp({apiKey:"AIzaSyCQUWX7kDWfIViV6OmASNUkJfZPCw-NpnE",authDomain:"twiter-clone-24cd4.firebaseapp.com",databaseURL:"https://twiter-clone-24cd4.firebaseio.com",projectId:"twiter-clone-24cd4",storageBucket:"twiter-clone-24cd4.appspot.com",messagingSenderId:"6713186371",appId:"1:6713186371:web:ded9678050d349623e9cf6"});var b=o.a.auth(),d=o.a.firestore(),u=o.a.storage(),O=c(29),m=c(8),x=c(13),h=c.n(x),p=c(21),f=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(""),i=Object(j.a)(r,2),l=i[0],o=i[1],d=Object(n.useState)(!0),u=Object(j.a)(d,2),O=u[0],m=u[1],x=Object(n.useState)(""),f=Object(j.a)(x,2),v=f[0],g=f[1],N=function(e){var t=e.target.name,c=e.target.value;"email"===t?s(c):"password"===t&&o(c)},w=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!O){e.next=8;break}return e.next=5,b.createUserWithEmailAndPassword(c,l);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,b.signInWithEmailAndPassword(c,l);case 10:a=e.sent;case 11:console.log(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),g(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"auth-form",children:Object(a.jsxs)("form",{onSubmit:w,children:[Object(a.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:c,onChange:N}),Object(a.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:l,onChange:N}),Object(a.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary ",children:O?"Sign Up":"Sign In"}),v,Object(a.jsx)("button",{onClick:function(){m((function(e){return!e}))},className:"btn btn-lg btn-secondary",children:O?"Log In":"Sign Up"})]})})},v=c(42),g=c(24),N=function(){var e=function(){var e=Object(p.a)(h.a.mark((function e(t){var c,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(c=t.target.name)?a=new o.a.auth.GoogleAuthProvider:"facebook"===c&&(a=new o.a.auth.FacebookAuthProvider),e.next=4,b.signInWithPopup(a);case 4:n=e.sent,console.log(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"auth-provider",children:[Object(a.jsxs)("button",{className:"btn btn-lg btn-outline google",name:"google",onClick:e,children:[Object(a.jsx)(v.a,{className:"social-icon"}),"Continue with Google"]}),Object(a.jsxs)("button",{className:"btn btn-lg  facebook",name:"facebook",onClick:e,children:[Object(a.jsx)(g.a,{className:"social-icon"}),"Continue with Facebook"]})]})},w=function(){return Object(a.jsxs)("div",{className:"auth",children:[Object(a.jsx)("div",{className:"auth__left",children:Object(a.jsxs)("div",{className:"texts",children:[Object(a.jsx)("p",{children:"Follow your interests."}),Object(a.jsx)("p",{children:"Hear what people are talking about."}),Object(a.jsx)("p",{children:"Join the conversation."})]})}),Object(a.jsxs)("div",{className:"auth__right",children:[Object(a.jsx)(f,{}),Object(a.jsx)(N,{})]})]})},_=function(e){var t=e.editTweet,c=e.setUpdatedTweet,n=e.setShouldModalOpen;return Object(a.jsxs)("form",{onSubmit:function(e){return t(e)},children:[Object(a.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)}}),Object(a.jsx)("input",{type:"submit",value:"Update tweet"}),Object(a.jsx)("button",{type:"submit",onClick:function(){return n(!1)},children:"Cancel"})]})},U=c(25),k=c(30),y=c(28),C=c(22),S=function(e){var t=e.tweet,c=e.isCreator,n=e.deleteTweet,s=e.openEditModal;return Object(a.jsxs)("li",{className:"tweet",children:[Object(a.jsx)("div",{className:"col-1",children:t.user.avatar?Object(a.jsx)("img",{src:t.user.avatar,alt:"avatar",className:"avatar"}):Object(a.jsx)(y.a,{className:"avatar"})}),Object(a.jsxs)("div",{className:"col-2",children:[Object(a.jsxs)("div",{className:"tweet__header",children:[Object(a.jsx)("span",{children:t.user.userName}),Object(a.jsx)("span",{children:t.user.email?"@".concat(t.user.email):null}),c&&Object(a.jsxs)("div",{className:"icons",children:[Object(a.jsx)(U.b,{className:"icon delete-icon",onClick:function(){return n(t.id,t.url)}}),Object(a.jsx)(k.a,{className:"icon",onClick:function(){return s(t)}})]})]}),Object(a.jsx)("div",{className:"tweet__text",children:t.text}),Object(a.jsx)("div",{className:"tweet__file",children:t.imgUrl&&Object(a.jsx)("img",{src:t.imgUrl,alt:"img"})}),Object(a.jsxs)("div",{className:"tweet__footer",children:[Object(a.jsx)(g.b,{}),Object(a.jsx)(C.d,{}),Object(a.jsx)(C.c,{}),Object(a.jsx)(k.c,{})]})]})]})},E=function(e,t,c){var a=Object(n.useState)(c?"":e.avatar),s=Object(j.a)(a,2),r=s[0],i=s[1];return Object(n.useEffect)((function(){if(t){var a="".concat(e.email,"/").concat(c?"images upload":"avatar","/ ").concat(t.name),n=u.ref(a);n.put(t).on("state_change",null,null,Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)}))))}}),[t,e]),[r,i]},I=c(31),L=c(34),T=c(35),A=function(e){var t=e.currentUser,c=e.addTweet,s=Object(n.useState)(""),r=Object(j.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(null),b=Object(j.a)(o,2),d=b[0],O=b[1],m=E(t,d,"imgUpload"),x=Object(j.a)(m,2),h=x[0],p=x[1];return Object(a.jsxs)("div",{className:"newTweet",children:[Object(a.jsx)("div",{className:"col-1",children:t.avatar?Object(a.jsx)("img",{src:t.avatar,alt:"user-img",className:"avatar"}):Object(a.jsx)(y.a,{className:"avatar"})}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(i||h)&&(c(i,h),O(null),p(""),l(""))},className:"col-2",children:[Object(a.jsx)("input",{type:"text",className:"newTweet__input",value:i,onChange:function(e){l(e.target.value)},placeholder:"What's happening ?"}),d&&Object(a.jsxs)("div",{className:"newTweet__file-preview",children:[Object(a.jsx)("img",{src:h,alt:"img"}),Object(a.jsx)("button",{className:"btn btn-sm btn-primary clear-btn",onClick:function(){O(null),p(""),u.refFromURL(h).delete()},children:"x"})]}),Object(a.jsxs)("div",{className:"newTweet__footer",children:[Object(a.jsxs)("label",{htmlFor:"file-input",children:[Object(a.jsx)(I.c,{}),Object(a.jsx)("input",{id:"file-input",type:"file",accept:"image/*",onChange:function(e){O(e.target.files[0])}})]}),Object(a.jsx)(L.a,{}),Object(a.jsx)(U.a,{}),Object(a.jsx)(T.a,{}),Object(a.jsx)(T.b,{}),Object(a.jsx)("button",{type:"submit",className:"btn btn-md btn-primary tweet-btn",children:"Tweet"})]})]})]})},F=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=d.collection("tweets").orderBy("createdAt","asc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})}));a(t)}));return function(){return e()}}),[]),c},P=function(e){var t=e.currentUser,c=F(),s=Object(n.useState)(!1),r=Object(j.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(null),b=Object(j.a)(o,2),O=b[0],m=b[1],x=Object(n.useState)(""),h=Object(j.a)(x,2),p=h[0],f=h[1],v=function(e,t){window.confirm("Are you sure you want to delete ?")&&(d.collection("tweets").doc(e).delete(),t&&u.refFromURL(t).delete())},g=function(e){l(!0),m(e)};return Object(a.jsxs)("div",{className:"feed",children:[Object(a.jsx)("div",{className:"feed__header",children:Object(a.jsx)("h3",{children:"Home"})}),Object(a.jsx)(A,{currentUser:t,addTweet:function(e,c){d.collection("tweets").add({text:e,imgUrl:c,user:{avatar:t.avatar,userName:t.userName,email:t.email},createdAt:Date.now(),creatorId:t.uid})}}),Object(a.jsx)("ul",{children:c.map((function(e){return Object(a.jsx)(S,{tweet:e,isCreator:e.creatorId===t.uid,deleteTweet:v,openEditModal:g},e.id)}))}),i&&Object(a.jsx)(_,{updatedTweet:p,editTweet:function(e){e.preventDefault(),d.collection("tweets").doc(O.id).update({text:p}),l(!1),f("")},setUpdatedTweet:f,setShouldModalOpen:l})]})},R=c(43),H=c(44),B=function(e){var t=e.currentUser,c=e.setIsEditBtnClick,s=Object(n.useRef)();return Object(a.jsxs)("div",{className:"profileHeader",children:[Object(a.jsx)("div",{className:"profileHeader__bg",children:Object(a.jsx)("div",{className:"default-bg"})}),Object(a.jsxs)("div",{className:"profileHeader__edit-profile",children:[Object(a.jsx)("div",{className:"profile-img",children:t.avatar?Object(a.jsx)("img",{src:t.avatar,alt:"profile"}):Object(a.jsx)("div",{className:"default-img"})}),Object(a.jsx)("button",{ref:s,className:"btn btn-md btn-secondary edit-btn",onClick:function(){c(!0)},children:"Edit profile"})]}),Object(a.jsx)("div",{className:"profileHeader__username",children:t.userName?t.userName:t.email}),Object(a.jsxs)("div",{className:" profileHeader__bio",children:[t.bio?t.bio:null," no bio"]}),Object(a.jsxs)("div",{className:"profileHeader__other-info",children:[Object(a.jsx)(R.a,{})," Dublin",Object(a.jsx)(H.a,{className:"calendar"})," Joined August 2018"]}),Object(a.jsx)("nav",{className:"profileHeader__nav",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Tweets"})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Tweets & replies"})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Media"})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Likes"})})]})})]})};function D(e,t){s.a.useEffect((function(){var c=function(c){e.current&&!e.current.contains(c.target)&&t(c)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),function(){document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c)}}),[e,t])}var M=function(e){var t=e.currentUser,c=e.refreshCurrentUser,s=e.setIsEditBtnClick,r=Object(n.useState)(t.userName||""),i=Object(j.a)(r,2),o=i[0],u=i[1],O=Object(n.useState)(null),m=Object(j.a)(O,2),x=m[0],f=m[1],v=E(t,x),g=Object(j.a)(v,1)[0],N=Object(n.useRef)(),w=function(){var e=Object(p.a)(h.a.mark((function e(a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),o===t.userName&&g===t.avatar){e.next=10;break}return e.next=4,t.updateProfile({displayName:o,photoURL:g});case 4:return c(),e.next=7,d.collection("tweets").where("creatorId","==",t.uid).get();case 7:n=e.sent,n.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})})).forEach((function(e){d.collection("tweets").doc(e.id).update({user:{avatar:b.currentUser.photoURL,userName:b.currentUser.displayName}})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return D(N,(function(){s(!1)})),Object(a.jsx)("div",{className:"edit-modal",children:Object(a.jsxs)("form",{ref:N,onSubmit:w,className:"edit-modal-form",children:[Object(a.jsxs)("div",{className:"edit-modal-form__row-1",children:[Object(a.jsx)(C.b,{className:"close",onClick:function(){return s(!1)}}),Object(a.jsx)("h3",{children:"Edit profile"}),Object(a.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary save-btn",onClick:w,children:"Save"})]}),Object(a.jsx)("div",{className:"edit-modal-form__row-2",children:Object(a.jsxs)("label",{htmlFor:"bg-img",children:[Object(a.jsx)(C.a,{className:"camera"}),Object(a.jsx)(C.b,{className:"close"}),Object(a.jsx)("input",{type:"file",accept:"image/*",id:"bg-img",className:"bg-img"})]})}),Object(a.jsx)("div",{className:"edit-modal-form__row-3",children:Object(a.jsxs)("div",{className:"profile-img",children:[g&&Object(a.jsx)("img",{src:g,alt:"avatar"}),Object(a.jsxs)("label",{htmlFor:"file-input",children:[Object(a.jsx)(C.a,{className:"camera"}),Object(a.jsx)("input",{id:"file-input",type:"file",accept:"image/*",onChange:function(e){f(e.target.files[0])}})]})]})}),Object(a.jsxs)("div",{className:"edit-modal-form__row-4",children:[Object(a.jsx)("label",{htmlFor:"name",children:"Name"}),Object(a.jsx)("input",{type:"text",id:"name",className:"input",value:o,onChange:function(e){u(e.target.value)}})]}),Object(a.jsxs)("div",{className:"edit-modal-form__row-5",children:[Object(a.jsx)("label",{htmlFor:"bio",children:"Bio"}),Object(a.jsx)("textarea",{type:"text",id:"name",className:"input"})]}),Object(a.jsxs)("div",{className:"edit-modal-form__row-6",children:[Object(a.jsx)("label",{htmlFor:"location",children:"Location"}),Object(a.jsx)("input",{type:"text",id:"location",className:"input"})]})]})})},J=function(e){var t=e.currentUser,c=e.refreshCurrentUser,s=Object(n.useState)(!1),r=Object(j.a)(s,2),i=r[0],l=r[1];return Object(a.jsxs)("div",{className:"profile",children:[Object(a.jsx)(B,{currentUser:t,setIsEditBtnClick:l}),i?Object(a.jsx)(M,{currentUser:t,refreshCurrentUser:c,setIsEditBtnClick:l}):null]})},W=c(46),z=c(47),q=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],s=t[1],r=Object(m.f)(),i=Object(n.useRef)();return D(i,(function(){s(!1)})),Object(a.jsx)("nav",{className:"sidebar",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(O.b,{to:"/",children:Object(a.jsx)(g.c,{className:"twitter-icon"})})}),Object(a.jsxs)("li",{children:[Object(a.jsx)(U.d,{}),Object(a.jsx)("span",{children:" Home "})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(k.b,{}),Object(a.jsx)("span",{children:" Explore "})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(W.a,{}),Object(a.jsx)("span",{children:" Notification"})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(I.b,{}),Object(a.jsx)("span",{children:" Message"})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(I.a,{}),Object(a.jsx)("span",{children:" Bookmarks "})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(U.c,{}),Object(a.jsx)("span",{children:" Lists "})]}),Object(a.jsx)("li",{children:Object(a.jsxs)(O.b,{to:"/profile",children:[Object(a.jsx)(g.d,{}),Object(a.jsx)("span",{children:"Profile"})]})}),Object(a.jsxs)("li",{children:[Object(a.jsx)(z.a,{}),Object(a.jsx)("span",{children:" More"})]}),Object(a.jsxs)("li",{ref:i,onClick:function(){s(!0)},children:[Object(a.jsx)(y.a,{}),Object(a.jsx)("span",{children:" Jinyoung Jeong"}),Object(a.jsx)("span",{children:Object(a.jsx)(L.b,{})})]}),c?Object(a.jsx)("button",{ref:i,className:"btn btn-md btn-danger logout",onClick:function(){b.signOut(),r.push("/")},children:"Log out"}):null]})})},G=c(32),V=function(){return Object(a.jsxs)("div",{className:"widget",children:[Object(a.jsx)(G.b,{sourceType:"profile",screenName:"saurabhnemade",options:{height:400}}),Object(a.jsx)(G.c,{tweetId:"933354946111705097"}),Object(a.jsx)(G.d,{id:"560070183650213889"}),Object(a.jsx)(G.a,{url:"https://facebook.com/saurabhnemade",options:{text:"#reactjs is awesome",via:"saurabhnemade"}})]})},K=function(e){var t=e.isLoggedIn,c=e.currentUser,n=e.refreshCurrentUser;return Object(a.jsx)(O.a,{children:Object(a.jsx)(m.c,{children:Object(a.jsx)(a.Fragment,{children:t?Object(a.jsxs)("div",{className:"main",children:[Object(a.jsx)(q,{}),Object(a.jsx)(m.a,{exact:!0,path:"/",component:function(){return Object(a.jsx)(P,{currentUser:c})}}),Object(a.jsx)(m.a,{exact:!0,path:"/profile",component:function(){return Object(a.jsx)(J,{currentUser:c,refreshCurrentUser:n})}}),Object(a.jsx)(V,{})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(m.a,{exact:!0,path:"/",component:w})})})})})};var Q=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(j.a)(r,2),o=i[0],d=i[1],u=Object(n.useState)(null),O=Object(j.a)(u,2),m=O[0],x=O[1];return Object(n.useEffect)((function(){b.onAuthStateChanged((function(e){e?(d(!0),x({userName:e.displayName,email:e.email,avatar:e.photoURL,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):d(!1),s(!0)}))}),[]),Object(a.jsx)("div",{className:"App",children:c?Object(a.jsx)(K,{isLoggedIn:o,currentUser:m,refreshCurrentUser:function(){x(Object(l.a)(Object(l.a)({},m),{},{userName:b.currentUser.displayName,avatar:b.currentUser.photoURL}))}}):Object(a.jsx)("h3",{className:"init-message",children:"initializing.."})})};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Q,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.0243291f.chunk.js.map