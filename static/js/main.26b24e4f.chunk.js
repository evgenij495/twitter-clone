(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{40:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(3),r=n.n(a),s=n(29),i=n.n(s),o=n(6),u=(n(40),n(20));n(41),n(43),n(52);u.a.initializeApp({apiKey:"AIzaSyCQUWX7kDWfIViV6OmASNUkJfZPCw-NpnE",authDomain:"twiter-clone-24cd4.firebaseapp.com",databaseURL:"https://twiter-clone-24cd4.firebaseio.com",projectId:"twiter-clone-24cd4",storageBucket:"twiter-clone-24cd4.appspot.com",messagingSenderId:"6713186371",appId:"1:6713186371:web:ded9678050d349623e9cf6"});var l=u.a.auth(),j=u.a.firestore(),d=u.a.storage(),b=n(18),p=n(7),O=n(11),m=n.n(O),f=n(16),h=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),u=i[0],j=i[1],d=Object(a.useState)(!0),b=Object(o.a)(d,2),p=b[0],O=b[1],h=Object(a.useState)(""),x=Object(o.a)(h,2),v=x[0],w=x[1],g=function(e){var t=e.target.name,n=e.target.value;"email"===t?r(n):"password"===t&&j(n)},N=function(){var e=Object(f.a)(m.a.mark((function e(t){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=8;break}return e.next=5,l.createUserWithEmailAndPassword(n,u);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,l.signInWithEmailAndPassword(n,u);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),w(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"auth-form",children:Object(c.jsxs)("form",{onSubmit:N,children:[Object(c.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:n,onChange:g}),Object(c.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:u,onChange:g}),Object(c.jsxs)("button",{type:"submit",className:"input-submit",children:[p?"Sign Up":"Sign In"," "]}),v,Object(c.jsx)("button",{onClick:function(){O((function(e){return!e}))},className:"auth-switch",children:p?"Log In":"Sign Up"})]})})},x=n(30),v=n(17),w=function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(t){var n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?c=new u.a.auth.GoogleAuthProvider:"facebook"===n&&(c=new u.a.auth.FacebookAuthProvider),e.next=4,l.signInWithPopup(c);case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"auth-provider",children:[Object(c.jsxs)("button",{className:"provider_btn google",name:"google",onClick:e,children:[Object(c.jsx)(x.a,{className:"social-icon"}),"Continue with Google"]}),Object(c.jsxs)("button",{className:"provider_btn facebook",name:"facebook",onClick:e,children:[Object(c.jsx)(v.b,{className:"social-icon"}),"Continue with Facebook"]})]})},g=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(h,{}),Object(c.jsx)(w,{})]})},N=function(e){var t=e.editTweet,n=e.setUpdatedTweet,a=e.setShouldModalOpen;return Object(c.jsxs)("form",{onSubmit:function(e){return t(e)},children:[Object(c.jsx)("input",{type:"text",onChange:function(e){return n(e.target.value)}}),Object(c.jsx)("input",{type:"submit",value:"Update tweet"}),Object(c.jsx)("button",{type:"submit",onClick:function(){return a(!1)},children:"Cancel"})]})},k=n(31),S=n(32),y=function(e){var t=e.tweet,n=e.isCreator,a=e.deleteTweet,r=e.openEditModal;return Object(c.jsxs)("li",{className:"tweet",children:[Object(c.jsx)("div",{className:"row-1",children:t.url&&Object(c.jsx)("img",{src:t.url,alt:"img"})})," ",Object(c.jsxs)("div",{className:"row-2",children:[Object(c.jsx)("span",{className:"tweet__text",children:t.text}),n&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(k.a,{className:"icon delete-icon",onClick:function(){return a(t.id,t.url)}}),Object(c.jsx)(S.a,{className:"icon",onClick:function(){return r(t)}})]})]})]})},U=function(e,t){var n=Object(a.useState)(""),c=Object(o.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){if(t){var n=d.ref("".concat(e.email,"/").concat(t.name));n.put(t).on("state_change",null,null,Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)}))))}}),[t,e]),[r,s]},C=n(33),I=function(e){var t=e.currentUser,n=e.addTweet,r=Object(a.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],l=Object(a.useState)(null),j=Object(o.a)(l,2),b=j[0],p=j[1],O=U(t,b),m=Object(o.a)(O,2),f=m[0],h=m[1];return Object(c.jsxs)("div",{className:"tweet-form-container",children:[Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(i||f)&&(n(i,f),p(null),h(""),u(""))},className:"tweet-form",children:[Object(c.jsxs)("div",{className:"row-1",children:[Object(c.jsx)("input",{type:"text",className:"input-text",value:i,onChange:function(e){u(e.target.value)},placeholder:"what's on your mind?"}),Object(c.jsx)("button",{type:"submit",className:"input-submit",children:Object(c.jsx)(v.a,{})})]}),Object(c.jsxs)("div",{className:"row-2",children:[Object(c.jsxs)("label",{htmlFor:"add-photo",className:"add-photo-label",children:[Object(c.jsx)("span",{children:"Add photo"}),Object(c.jsx)(C.a,{className:"add-photo-icon"})]}),Object(c.jsx)("input",{id:"add-photo",className:"add-photo-input",type:"file",accept:"image/*",onChange:function(e){p(e.target.files[0])}})]})]}),b&&Object(c.jsxs)("div",{className:"photo-snippet-container",children:[Object(c.jsx)("img",{src:f,alt:"img"}),Object(c.jsx)("button",{onClick:function(){p(null),h(""),d.refFromURL(f).delete()},children:"Clear"})]})]})},A=n(27),E=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=j.collection("tweets").orderBy("createdAt","asc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(A.a)(Object(A.a)({},e.data()),{},{id:e.id})}));c(t)}));return function(){return e()}}),[]),n},P=function(e){var t=e.currentUser,n=E(),r=Object(a.useState)(!1),s=Object(o.a)(r,2),i=s[0],u=s[1],l=Object(a.useState)(null),b=Object(o.a)(l,2),p=b[0],O=b[1],m=Object(a.useState)(""),f=Object(o.a)(m,2),h=f[0],x=f[1],v=function(e,t){window.confirm("Are you sure you want to delete ?")&&(j.collection("tweets").doc(e).delete(),t&&d.refFromURL(t).delete())},w=function(e){u(!0),O(e)};return Object(c.jsxs)("div",{className:"home",children:[Object(c.jsx)(I,{currentUser:t,addTweet:function(e,n){j.collection("tweets").add({text:e,url:n,createdAt:Date.now(),creatorId:t.uid})}}),Object(c.jsx)("ul",{className:"tweets",children:n.map((function(e){return Object(c.jsx)(y,{tweet:e,isCreator:e.creatorId===t.uid,deleteTweet:v,openEditModal:w},e.id)}))}),i&&Object(c.jsx)(N,{updatedTweet:h,editTweet:function(e){e.preventDefault(),j.collection("tweets").doc(p.id).update({text:h}),u(!1),x("")},setUpdatedTweet:x,setShouldModalOpen:u})]})},D=function(e){var t=e.currentUser,n=e.refreshCurrentUser,r=Object(p.f)(),s=Object(a.useState)(t.displayName),i=Object(o.a)(s,2),u=i[0],j=i[1],d=function(){var e=Object(f.a)(m.a.mark((function e(c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),u===t.displayName){e.next=5;break}return e.next=4,t.updateProfile({displayName:u});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"profile",children:[Object(c.jsxs)("form",{onSubmit:d,children:[Object(c.jsx)("input",{type:"text",placeholder:"Display name",value:u,onChange:function(e){j(e.target.value)}}),Object(c.jsx)("input",{type:"submit",value:"Update profile",className:"input-submit"})]}),Object(c.jsx)("span",{className:"line"}),Object(c.jsx)("button",{onClick:function(){l.signOut(),r.push("/")},className:"logout-btn",children:"Log Out"})]})},F=function(){return Object(c.jsx)("header",{className:"header",children:Object(c.jsx)(b.b,{to:"/",className:"link_home",children:Object(c.jsx)(v.c,{className:"link_icon"})})})},T=function(e){var t=e.currentUser;return Object(c.jsx)("nav",{children:Object(c.jsxs)(b.b,{to:"/profile",className:"link_profile",children:[Object(c.jsx)(v.d,{className:"link_icon"}),t.displayName?t.displayName:t.email]})})},_=function(e){var t=e.isLoggedIn,n=e.currentUser,a=e.refreshCurrentUser;return Object(c.jsxs)(b.a,{children:[Object(c.jsx)(F,{}),t&&Object(c.jsx)(T,{currentUser:n}),Object(c.jsx)(p.c,{children:t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p.a,{exact:!0,path:"/",component:function(){return Object(c.jsx)(P,{currentUser:n})}}),Object(c.jsx)(p.a,{exact:!0,path:"/profile",component:function(){return Object(c.jsx)(D,{currentUser:n,refreshCurrentUser:a})}})]}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(p.a,{exact:!0,path:"/",component:g})})})]})};var L=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),u=i[0],j=i[1],d=Object(a.useState)(null),b=Object(o.a)(d,2),p=b[0],O=b[1];return Object(a.useEffect)((function(){l.onAuthStateChanged((function(e){e?(j(!0),O(e),O({displayName:e.displayName,email:e.email,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):j(!1),r(!0)}))}),[]),Object(c.jsx)("div",{className:"App",children:n?Object(c.jsx)(_,{isLoggedIn:u,currentUser:p,refreshCurrentUser:function(){O(l.currentUser)}}):Object(c.jsx)("h3",{className:"init-message",children:"initializing.."})})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.26b24e4f.chunk.js.map